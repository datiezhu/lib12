language: csharp
mono: none
dotnet: 2.0.0
dist: trusty
script:
 - dotnet build -c Release
 - dotnet test lib12.Tests
 - dotnet pack -c Release
deploy:
  skip_cleanup: true
  provider: script
  script: dotnet nuget push lib12/bin/Release/lib12.*.nupkg --source https://api.nuget.org/v3/index.json --api-key $NUGET_API_KEY
  on:
    branch: master
    tags: true

addons:
  sonarcloud:
    organization: "kkalinowski-github" # the key of the org you chose at step #3
    token:
      secure: $SONAR_TOKEN # encrypted value of your token
script:
  # other script steps might be done before running the actual analysis
  - sonar-scanner